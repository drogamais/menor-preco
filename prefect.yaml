name: mp-feeder-project
prefect-version: 3.6.1

pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/drogamais/menor-preco.git
      branch: prefect_test
      
  - prefect.deployments.steps.pip_install_requirements:
      # CORREÇÃO AQUI: Remova o nome da subpasta
      requirements_file: requirements.txt 
      stream_output: true 

deployments:
- name: mp-feeder-etl-diario
  version: null
  tags:
    - etl
    - producao
  description: Roda o ETL do Menor Preço (1 lote por execucao)

  schedule:
    cron: "0 5 * * *"
    timezone: "America/Sao_Paulo"

  # CORREÇÃO AQUI: Remova o nome da subpasta
  entrypoint: mp_feeder_flow.py:mp_feeder_flow

  work_pool:
    name: etl-agent-pool